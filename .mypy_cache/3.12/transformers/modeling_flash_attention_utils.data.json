{".class":"MypyFile","_fullname":"transformers.modeling_flash_attention_utils","future_import_flags":[],"is_partial_stub_package":false,"is_stub":false,"names":{".class":"SymbolTable","F":{".class":"SymbolTableNode","cross_ref":"torch.nn.functional","kind":"Gdef","module_hidden":true,"module_public":false},"FlashAttentionKwargs":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"TypeInfo","_promote":[],"abstract_attributes":[],"alt_promote":null,"bases":["typing._TypedDict"],"dataclass_transform_spec":null,"declared_metaclass":null,"defn":{".class":"ClassDef","fullname":"transformers.modeling_flash_attention_utils.FlashAttentionKwargs","name":"FlashAttentionKwargs","type_vars":[]},"deletable_attributes":[],"deprecated":null,"flags":[],"fullname":"transformers.modeling_flash_attention_utils.FlashAttentionKwargs","has_param_spec_type":false,"metaclass_type":null,"metadata":{},"module_name":"transformers.modeling_flash_attention_utils","mro":["transformers.modeling_flash_attention_utils.FlashAttentionKwargs","typing._TypedDict","typing.Mapping","typing.Collection","typing.Iterable","typing.Container","builtins.object"],"names":{".class":"SymbolTable"},"self_type":null,"slots":null,"tuple_type":null,"type_vars":[],"typeddict_type":{".class":"TypedDictType","fallback":"typing._TypedDict","items":[["cu_seq_lens_q",{".class":"UnionType","items":["torch._C.LongTensor",{".class":"NoneType"}],"uses_pep604_syntax":false}],["cu_seq_lens_k",{".class":"UnionType","items":["torch._C.LongTensor",{".class":"NoneType"}],"uses_pep604_syntax":false}],["max_length_q",{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false}],["max_length_k",{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false}]],"readonly_keys":[],"required_keys":[]}}},"Optional":{".class":"SymbolTableNode","cross_ref":"typing.Optional","kind":"Gdef","module_hidden":true,"module_public":false},"TypedDict":{".class":"SymbolTableNode","cross_ref":"typing.TypedDict","kind":"Gdef","module_hidden":true,"module_public":false},"__annotations__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"transformers.modeling_flash_attention_utils.__annotations__","name":"__annotations__","type":{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6}],"extra_attrs":null,"type_ref":"builtins.dict"}}},"__doc__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"transformers.modeling_flash_attention_utils.__doc__","name":"__doc__","type":"builtins.str"}},"__file__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"transformers.modeling_flash_attention_utils.__file__","name":"__file__","type":"builtins.str"}},"__name__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"transformers.modeling_flash_attention_utils.__name__","name":"__name__","type":"builtins.str"}},"__package__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"transformers.modeling_flash_attention_utils.__package__","name":"__package__","type":"builtins.str"}},"__spec__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"transformers.modeling_flash_attention_utils.__spec__","name":"__spec__","type":"_frozen_importlib.ModuleSpec"}},"_flash_attention_forward":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,4],"arg_names":["query_states","key_states","value_states","attention_mask","query_length","is_causal","dropout","position_ids","softmax_scale","sliding_window","use_top_left_mask","softcap","deterministic","cu_seq_lens_q","cu_seq_lens_k","max_length_q","max_length_k","target_dtype","implementation","kwargs"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.modeling_flash_attention_utils._flash_attention_forward","name":"_flash_attention_forward","type":{".class":"CallableType","arg_kinds":[0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,4],"arg_names":["query_states","key_states","value_states","attention_mask","query_length","is_causal","dropout","position_ids","softmax_scale","sliding_window","use_top_left_mask","softcap","deterministic","cu_seq_lens_q","cu_seq_lens_k","max_length_q","max_length_k","target_dtype","implementation","kwargs"],"arg_types":["torch._tensor.Tensor","torch._tensor.Tensor","torch._tensor.Tensor",{".class":"UnionType","items":["torch._tensor.Tensor",{".class":"NoneType"}],"uses_pep604_syntax":false},"builtins.int","builtins.bool","builtins.float",{".class":"UnionType","items":["torch._tensor.Tensor",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.float",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false},"builtins.bool",{".class":"UnionType","items":["builtins.float",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.bool",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["torch._C.LongTensor",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["torch._C.LongTensor",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["torch._C.dtype",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":1}],"bound_args":[],"def_extras":{"first_arg":null},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_flash_attention_forward","ret_type":{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":1},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_flash_fn":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_inferred","has_explicit_value"],"fullname":"transformers.modeling_flash_attention_utils._flash_fn","name":"_flash_fn","type":{".class":"NoneType"}}},"_flash_varlen_fn":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_inferred","has_explicit_value"],"fullname":"transformers.modeling_flash_attention_utils._flash_varlen_fn","name":"_flash_varlen_fn","type":{".class":"NoneType"}}},"_get_unpad_data":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0],"arg_names":["attention_mask"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.modeling_flash_attention_utils._get_unpad_data","name":"_get_unpad_data","type":{".class":"CallableType","arg_kinds":[0],"arg_names":["attention_mask"],"arg_types":["torch._tensor.Tensor"],"bound_args":[],"def_extras":{"first_arg":null},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_get_unpad_data","ret_type":{".class":"TupleType","implicit":false,"items":["torch._tensor.Tensor","torch._tensor.Tensor","builtins.int"],"partial_fallback":{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6}],"extra_attrs":null,"type_ref":"builtins.tuple"}},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_hf_api_to_flash_mapping":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_inferred","has_explicit_value"],"fullname":"transformers.modeling_flash_attention_utils._hf_api_to_flash_mapping","name":"_hf_api_to_flash_mapping","type":{".class":"Instance","args":["builtins.str","builtins.str"],"extra_attrs":null,"type_ref":"builtins.dict"}}},"_index_first_axis":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0],"arg_names":["tensor","indices"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.modeling_flash_attention_utils._index_first_axis","name":"_index_first_axis","type":null}},"_is_packed_sequence":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0],"arg_names":["position_ids","batch_size"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.modeling_flash_attention_utils._is_packed_sequence","name":"_is_packed_sequence","type":null}},"_lazy_define_process_function":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0],"arg_names":["flash_function"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.modeling_flash_attention_utils._lazy_define_process_function","name":"_lazy_define_process_function","type":null}},"_lazy_imports":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0],"arg_names":["implementation"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.modeling_flash_attention_utils._lazy_imports","name":"_lazy_imports","type":{".class":"CallableType","arg_kinds":[0],"arg_names":["implementation"],"arg_types":[{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":false}],"bound_args":[],"def_extras":{"first_arg":null},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_lazy_imports","ret_type":{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":1},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_pad_fn":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_inferred","has_explicit_value"],"fullname":"transformers.modeling_flash_attention_utils._pad_fn","name":"_pad_fn","type":{".class":"NoneType"}}},"_pad_input":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0],"arg_names":["hidden_states","indices","batch","seqlen"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.modeling_flash_attention_utils._pad_input","name":"_pad_input","type":null}},"_prepare_from_posids":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0],"arg_names":["query","key","value","position_ids"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.modeling_flash_attention_utils._prepare_from_posids","name":"_prepare_from_posids","type":null}},"_process_flash_attention_kwargs":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,1,1,1,1,1,1,1,1,4],"arg_names":["query_length","key_length","is_causal","dropout","softmax_scale","sliding_window","use_top_left_mask","softcap","deterministic","s_aux","supports_mapping","kwargs"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.modeling_flash_attention_utils._process_flash_attention_kwargs","name":"_process_flash_attention_kwargs","type":{".class":"CallableType","arg_kinds":[0,0,0,1,1,1,1,1,1,1,1,4],"arg_names":["query_length","key_length","is_causal","dropout","softmax_scale","sliding_window","use_top_left_mask","softcap","deterministic","s_aux","supports_mapping","kwargs"],"arg_types":["builtins.int","builtins.int","builtins.bool","builtins.float",{".class":"UnionType","items":["builtins.float",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.int",{".class":"NoneType"}],"uses_pep604_syntax":false},"builtins.bool",{".class":"UnionType","items":["builtins.float",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["builtins.bool",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":["torch._tensor.Tensor",{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"UnionType","items":[{".class":"Instance","args":["builtins.str","builtins.bool"],"extra_attrs":null,"type_ref":"builtins.dict"},{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":1}],"bound_args":[],"def_extras":{"first_arg":null},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_process_flash_attention_kwargs","ret_type":{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":1},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_process_flash_kwargs_fn":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_inferred","has_explicit_value"],"fullname":"transformers.modeling_flash_attention_utils._process_flash_kwargs_fn","name":"_process_flash_kwargs_fn","type":{".class":"NoneType"}}},"_unpad_fn":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_inferred","has_explicit_value"],"fullname":"transformers.modeling_flash_attention_utils._unpad_fn","name":"_unpad_fn","type":{".class":"NoneType"}}},"_unpad_input":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,1],"arg_names":["hidden_states","attention_mask","unused_mask"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.modeling_flash_attention_utils._unpad_input","name":"_unpad_input","type":null}},"_upad_input":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0,0,0],"arg_names":["query_layer","key_layer","value_layer","attention_mask","query_length","unpad_input_func"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.modeling_flash_attention_utils._upad_input","name":"_upad_input","type":{".class":"CallableType","arg_kinds":[0,0,0,0,0,0],"arg_names":["query_layer","key_layer","value_layer","attention_mask","query_length","unpad_input_func"],"arg_types":["torch._tensor.Tensor","torch._tensor.Tensor","torch._tensor.Tensor","torch._tensor.Tensor","builtins.int",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":1}],"bound_args":[],"def_extras":{"first_arg":null},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_upad_input","ret_type":{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":1},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"fa_peft_integration_check":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,1],"arg_names":["q","k","v","target_dtype"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.modeling_flash_attention_utils.fa_peft_integration_check","name":"fa_peft_integration_check","type":{".class":"CallableType","arg_kinds":[0,0,0,1],"arg_names":["q","k","v","target_dtype"],"arg_types":["torch._tensor.Tensor","torch._tensor.Tensor","torch._tensor.Tensor",{".class":"UnionType","items":["torch._C.dtype",{".class":"NoneType"}],"uses_pep604_syntax":false}],"bound_args":[],"def_extras":{"first_arg":null},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"fa_peft_integration_check","ret_type":{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":1},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"flash_attn_supports_top_left_mask":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[],"arg_names":[],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.modeling_flash_attention_utils.flash_attn_supports_top_left_mask","name":"flash_attn_supports_top_left_mask","type":null}},"inspect":{".class":"SymbolTableNode","cross_ref":"inspect","kind":"Gdef","module_hidden":true,"module_public":false},"is_flash_attn_2_available":{".class":"SymbolTableNode","cross_ref":"transformers.utils.import_utils.is_flash_attn_2_available","kind":"Gdef","module_hidden":true,"module_public":false},"is_flash_attn_3_available":{".class":"SymbolTableNode","cross_ref":"transformers.utils.import_utils.is_flash_attn_3_available","kind":"Gdef","module_hidden":true,"module_public":false},"is_flash_attn_available":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[],"arg_names":[],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.modeling_flash_attention_utils.is_flash_attn_available","name":"is_flash_attn_available","type":null}},"is_flash_attn_greater_or_equal_2_10":{".class":"SymbolTableNode","cross_ref":"transformers.utils.import_utils.is_flash_attn_greater_or_equal_2_10","kind":"Gdef","module_hidden":true,"module_public":false},"is_torch_npu_available":{".class":"SymbolTableNode","cross_ref":"transformers.utils.import_utils.is_torch_npu_available","kind":"Gdef","module_hidden":true,"module_public":false},"lazy_import_flash_attention":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0],"arg_names":["implementation"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.modeling_flash_attention_utils.lazy_import_flash_attention","name":"lazy_import_flash_attention","type":{".class":"CallableType","arg_kinds":[0],"arg_names":["implementation"],"arg_types":[{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":false}],"bound_args":[],"def_extras":{"first_arg":null},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"lazy_import_flash_attention","ret_type":{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":1},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"logger":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_inferred","has_explicit_value"],"fullname":"transformers.modeling_flash_attention_utils.logger","name":"logger","type":"logging.Logger"}},"logging":{".class":"SymbolTableNode","cross_ref":"transformers.utils.logging","kind":"Gdef","module_hidden":true,"module_public":false},"os":{".class":"SymbolTableNode","cross_ref":"os","kind":"Gdef","module_hidden":true,"module_public":false},"partial":{".class":"SymbolTableNode","cross_ref":"functools.partial","kind":"Gdef","module_hidden":true,"module_public":false},"prepare_fa_kwargs_from_position_ids":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0],"arg_names":["position_ids"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"transformers.modeling_flash_attention_utils.prepare_fa_kwargs_from_position_ids","name":"prepare_fa_kwargs_from_position_ids","type":null}},"torch":{".class":"SymbolTableNode","cross_ref":"torch","kind":"Gdef","module_hidden":true,"module_public":false}},"path":"/home/paul/Medical_KG/.venv/lib/python3.12/site-packages/transformers/modeling_flash_attention_utils.py"}